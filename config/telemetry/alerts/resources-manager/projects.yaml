apiVersion: monitoring.coreos.com/v1
kind: PrometheusRule
metadata:
  name: resourcemanager-projects
spec:
  groups:
    - name: resourcemanager-projects
      rules:
        - alert: ProjectStuckCreatingSLOViolation
          expr: |
            (time() - milo_projects_created_timestamp) > 60
            unless ignoring(type, reason, status) (milo_projects_status_condition{type="Ready", status="True"} == 1)
          for: 0s
          labels:
            severity: critical
            slo_violation: "true"
          annotations:
            summary: "Project {{ $labels.resource_name }} is stuck creating for over 60 seconds"
            description: "Project {{ $labels.resource_name }} has been in creation state for {{ $value }} seconds without reaching Ready status, which exceeds the 60-second SLO threshold."