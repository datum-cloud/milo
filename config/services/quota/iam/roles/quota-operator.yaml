apiVersion: iam.miloapis.com/v1alpha1
kind: Role
metadata:
  name: quota.miloapis.com-operator
  namespace: milo-system
  labels:
    quota.miloapis.com/role-type: operator
    quota.miloapis.com/service: quota
spec:
  launchStage: Beta
  includedPermissions:
    # ResourceRegistration read permissions
    - quota.miloapis.com/resourceregistrations.get
    - quota.miloapis.com/resourceregistrations.list
    - quota.miloapis.com/resourceregistrations.watch

    # ResourceGrant read permissions
    - quota.miloapis.com/resourcegrants.get
    - quota.miloapis.com/resourcegrants.list
    - quota.miloapis.com/resourcegrants.watch

    # ResourceClaim limited management (for cleanup and reconciliation)
    - quota.miloapis.com/resourceclaims.get
    - quota.miloapis.com/resourceclaims.list
    - quota.miloapis.com/resourceclaims.update
    - quota.miloapis.com/resourceclaims.patch
    - quota.miloapis.com/resourceclaims.watch
    - quota.miloapis.com/resourceclaims.delete

    # AllowanceBucket full management (system-managed resource)
    - quota.miloapis.com/allowancebuckets.create
    - quota.miloapis.com/allowancebuckets.get
    - quota.miloapis.com/allowancebuckets.list
    - quota.miloapis.com/allowancebuckets.update
    - quota.miloapis.com/allowancebuckets.patch
    - quota.miloapis.com/allowancebuckets.watch
    - quota.miloapis.com/allowancebuckets.delete

    # GrantCreationPolicy read permissions
    - quota.miloapis.com/grantcreationpolicies.get
    - quota.miloapis.com/grantcreationpolicies.list
    - quota.miloapis.com/grantcreationpolicies.watch

    # ClaimCreationPolicy read permissions
    - quota.miloapis.com/claimcreationpolicies.get
    - quota.miloapis.com/claimcreationpolicies.list
    - quota.miloapis.com/claimcreationpolicies.watch
