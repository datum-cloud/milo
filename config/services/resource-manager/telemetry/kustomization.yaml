apiVersion: kustomize.config.k8s.io/v1alpha1
kind: Component

# Kustomize component for resource manager telemetry
# Includes both raw metrics collection and aggregation policies
# for comprehensive observability of the resource manager system.

metadata:
  name: resource-manager-telemetry
  annotations:
    config.kubernetes.io/function: |
      container:
        image: registry.k8s.io/kustomize/kustomize:v5.0.1
    config.kubernetes.io/local-config: "true"

components:
  - metrics/control-plane

generatorOptions:
  disableNameSuffixHash: false
  labels:
    milo.resourcemanager/telemetry: complete
    app.kubernetes.io/part-of: milo
    app.kubernetes.io/component: resource-manager
    app.kubernetes.io/managed-by: kustomize
